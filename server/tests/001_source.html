<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><title>Introduction: Reactive State Machine (2016)</title><link rel="canonical" href="https://zenn.dev/inamiy/books/3dd014a50f321040a047/viewer/ff60bc16b7b952a91adb"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:url" content="https://zenn.dev/inamiy/books/3dd014a50f321040a047/viewer/ff60bc16b7b952a91adb"/><meta property="og:title" content="Introduction: Reactive State Machine (2016)"/><meta property="og:image" content="https://res.cloudinary.com/zenn/image/upload/s--xHR-Iz4N--/g_center%2Ch_280%2Cl_fetch:aHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL3plbm4tdXNlci11cGxvYWQvYm9va19jb3Zlci9kNjQ0ZTMyMmQwLmpwZw==%2Cw_200/v1627283836/default/og-base-book_yz4z02.jpg"/><meta property="og:type" content="article"/><meta property="og:site_name" content="Zenn"/><meta content="Yasuhiro Inamiさんによる本" name="zenn:description"/><meta name="next-head-count" content="11"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-K42DRM8');</script><script async="" src="https://www.googletagmanager.com/gtag/js"></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());</script><script src="https://embed.zenn.studio/js/listen-embed-event.js"></script><style>
            @font-face {
              font-family: 'Inter';
              font-weight: 600;
              font-display: swap;
              src: local(''), url('https://zenn.dev/fonts/inter-v3-latin-600.woff2') format('woff2');
            }
            @font-face {
              font-family: 'Inter';
              font-weight: 700;
              font-display: swap;
              src: local(''), url('https://zenn.dev/fonts/inter-v3-latin-700.woff2') format('woff2');
            }</style><meta content="Zenn" name="apple-mobile-web-app-title"/><link href="https://zenn.dev/images/logo-transparent.png" rel="shortcut icon" type="image/png"/><link href="https://zenn.dev/images/icon.png" rel="apple-touch-icon-precomposed" type="image/png"/><link rel="preload" href="https://zenn.dev/_next/static/css/aa7c92166c16e0a6.css" as="style"/><link rel="stylesheet" href="https://zenn.dev/_next/static/css/aa7c92166c16e0a6.css" data-n-g=""/><link rel="preload" href="https://zenn.dev/_next/static/css/3ec926cf20f3f50a.css" as="style"/><link rel="stylesheet" href="https://zenn.dev/_next/static/css/3ec926cf20f3f50a.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://zenn.dev/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="https://zenn.dev/_next/static/chunks/webpack-c15094771d31a925.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/framework-ce84985cd166733a.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/main-f5cb3ceb95c17179.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/pages/_app-1818af8cf5f40bda.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/8100-63151ebce702c888.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/3253-cb69b61f7f04e9a3.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/3345-0a587899abd56017.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/7103-512a8306d5aae78b.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/8382-f17d58efd0fb539b.js" defer=""></script><script src="https://zenn.dev/_next/static/chunks/pages/%5Busername%5D/books/%5Bslug%5D/viewer/%5B%5B...chapter_slug%5D%5D-bcef40c309da1f50.js" defer=""></script><script src="https://zenn.dev/_next/static/piX8DDrzno6pbqKClrLHx/_buildManifest.js" defer=""></script><script src="https://zenn.dev/_next/static/piX8DDrzno6pbqKClrLHx/_ssgManifest.js" defer=""></script></head><body><script>const shouldUseTwemoji = !/(googlebot|macintosh|macintel|macppc|mac68k|macos|iphone|ipad)/i.test(window.navigator.userAgent);
        if(shouldUseTwemoji) document.body.setAttribute("data-use-twemoji", "true");</script><div id="__next"><aside class="View_mobileMenu__vfTwe"><button aria-label="メニューを開く" class="View_menuButton__6pqFT"><svg x="0px" y="0px" viewBox="0 0 27 27" style="enable-background:new 0 0 27 27" xml:space="preserve" height="26" width="26"><path fill="currentColor" d="M22.8,5.5c-0.9,0-1.6,0.7-1.6,1.6s0.7,1.6,1.6,1.6s1.6-0.7,1.6-1.6S23.7,5.5,22.8,5.5z M3.7,6.1c-0.6,0-1.1,0.5-1.1,1 s0.5,1.1,1,1.1c0,0,0,0,0,0h13.8c0.6,0,1.1-0.5,1.1-1s-0.5-1.1-1-1.1c0,0,0,0,0,0H3.7z M22.8,11.9c-0.9,0-1.6,0.7-1.6,1.6 s0.7,1.6,1.6,1.6s1.6-0.7,1.6-1.6S23.7,11.9,22.8,11.9z M3.7,12.4c-0.6,0-1.1,0.5-1.1,1s0.5,1.1,1,1.1c0,0,0,0,0,0h13.8 c0.6,0,1.1-0.5,1.1-1s-0.5-1.1-1-1.1c0,0,0,0,0,0H3.7z M22.8,18.3c-0.9,0-1.6,0.7-1.6,1.6c0,0.9,0.7,1.6,1.6,1.6s1.6-0.7,1.6-1.6 C24.4,19,23.7,18.3,22.8,18.3z M3.7,18.8c-0.6,0-1.1,0.5-1.1,1s0.5,1.1,1,1.1c0,0,0,0,0,0h13.8c0.6,0,1.1-0.5,1.1-1 c0-0.6-0.5-1.1-1-1.1c0,0,0,0,0,0H3.7z"></path></svg></button><a class="View_mobileBookTitle__NGx1l" href="/inamiy/books/3dd014a50f321040a047">Functional iOS Architecture for SwiftUI (English)</a><div class="View_fontToggleContainer__X2wNX"><span class="View_fontToggleContent__mTbxr"></span><button aria-label="フォント設定" class="View_menuButton__6pqFT"><svg x="0px" y="0px" viewBox="0 0 27 27" style="enable-background:new 0 0 27 27" xml:space="preserve" height="28" width="28"><path fill="currentColor" d="M8.4,3.2L3.3,16.8h2.1L7,12.6h5.2l0.9-2.4l-2.6-6.9H8.4z M9.4,6l1.7,4.5H7.8L9.4,6z M16.7,6.3l-5.1,13.6h2.1l1.6-4.2h5 l1.6,4.2h2.1L18.8,6.3H16.7z M17.8,9.1l1.7,4.5h-3.4L17.8,9.1z M11.5,22v2.1H24V22H11.5z"></path></svg></button></div></aside><article><div class="View_sidebarWrapper__J4kZS"><aside class="View_sidebar__npTDB"><a class="View_sidebarLogo__U_3VI" href="/"><svg x="0px" y="0px" viewBox="0 0 377.4 88.3" height="21"><title>Zenn</title><g fill="#111"><path d="M233,56.8h-39c0.5,3.5,2.2,6.8,4.8,9.2c2.7,2.3,6.2,3.5,9.8,3.4c2.8,0,5.6-0.5,8.2-1.7c2.5-1.1,4.8-2.8,6.5-5l8.2,9.5 c-2.5,3.4-5.7,6.1-9.5,7.9c-4.6,2.2-9.6,3.3-14.7,3.2c-5.7,0.1-11.4-1.2-16.5-4c-4.5-2.5-8.2-6.3-10.7-10.9s-3.8-9.8-3.7-15.1v-2.2 c-0.1-5.7,1.1-11.3,3.5-16.5c2.2-4.7,5.7-8.6,10.1-11.3c4.7-2.8,10.1-4.2,15.5-4.1c5.2-0.1,10.3,1.1,14.9,3.7 c4.1,2.5,7.4,6.2,9.4,10.5c2.2,5.1,3.3,10.5,3.2,16.1V56.8z M216.1,43.9c0.1-2.9-0.9-5.7-2.8-7.9c-1.8-1.9-4.4-2.9-7.9-2.9 c-2.9-0.1-5.8,1.1-7.7,3.2c-2,2.6-3.3,5.7-3.6,9h22V43.9z"></path><path d="M128.3,67.9h36.1v14.7h-56.9V72l35.8-54.3h-36.2V2.9h56.6v10.4L128.3,67.9z"></path><path d="M248.8,50.7c0-19.1,12.7-29.2,28.2-29.2s27.9,10.1,27.9,29.2V82h-16V51.4c0-10.6-4.8-16.1-12-16.1s-12.4,5.5-12.4,16.1 v30.7h-15.8L248.8,50.7L248.8,50.7z"></path><path d="M320.3,50.7c0-19.1,12.7-29.2,28.2-29.2s27.9,10.1,27.9,29.2V82h-16V51.4c0-10.6-4.8-16.1-12-16.1S336,40.8,336,51.4v30.7 h-15.8L320.3,50.7L320.3,50.7z"></path></g><path fill="#3EA8FF" class="st0" d="M2.4,83.3h17c0.9,0,1.7-0.5,2.2-1.2L68.4,5.2C69,4.2,68.3,3,67.1,3H51c-0.8,0-1.5,0.4-1.9,1.1L1.6,81.9 C1.3,82.5,1.7,83.3,2.4,83.3z"></path><path fill="#3EA8FF" class="st0" d="M61,82.1l22.1-35.5c0.7-1.1-0.1-2.5-1.4-2.5H65.7c-0.6,0-1.2,0.3-1.5,0.8L41.5,81.2c-0.6,0.9,0.1,2.1,1.2,2.1 h16.3C59.8,83.3,60.6,82.9,61,82.1z"></path></svg></a><div class="View_sidebarScrollArea__VkX5E"><div class="View_sidebarBook__n15Cv"><a class="View_sidebarBookCover__tuM0r" href="/inamiy/books/3dd014a50f321040a047"><div class="BookCoverImage_container__e04p5 BookCoverImage_border__dyU2h" style="width:70px"><img alt="Functional iOS Architecture for SwiftUI (English)" height="98" src="https://res.cloudinary.com/zenn/image/fetch/s--6Be6MCYZ--/c_fill%2Cf_jpg%2Cfl_progressive%2Ch_350%2Cq_80%2Cw_250/https://storage.googleapis.com/zenn-user-upload/book_cover/d644e322d0.jpg" width="70"/></div></a><div class="View_sidebarBookInfo__N_tXH"><a class="View_sidebarBookTitle__IRpEP" href="/inamiy/books/3dd014a50f321040a047">Functional iOS Architecture for SwiftUI (English)</a><span style="display:block;width:1px;height:0.3rem;flex-shrink:0"></span><div class="LikeButton_container__lhHqp style-large"><button aria-label="いいね" class="LikeButton_button__uWgw1"><svg class="LikeButton_svgLike___dmwM" viewBox="0 0 110 110"><path class="LikeButton_svgLikeLine__ncYg7" d="M73,24a23.78,23.78,0,0,0-15.89,6.19,3.14,3.14,0,0,1-4.18,0A23.81,23.81,0,0,0,37,24a22,22,0,0,0-22,22c0,16.67,19.64,32.82,25.11,37.93,2.84,2.65,6.15,5.64,8.92,8.13a8.9,8.9,0,0,0,11.9,0c2.77-2.49,6.07-5.48,8.91-8.13C75.37,78.81,95,62.66,95,46A22,22,0,0,0,73,24Z" fill="currentColor"></path><path class="LikeButton_svgLikeInner__AOG_t" d="M66.25,76.42c-.71.64-1.32,1.2-1.82,1.67-2.51,2.33-5.39,5-7.94,7.25a2.21,2.21,0,0,1-3,0C51,83,48.1,80.42,45.59,78.09c-.5-.47-1.12-1-1.82-1.67C38.09,71.29,23,57.67,23,46A14,14,0,0,1,37,32a15.92,15.92,0,0,1,11.65,5.23l4.73,5a2.2,2.2,0,0,0,3.23,0l4.72-5A16.06,16.06,0,0,1,73,32,14,14,0,0,1,87,46C87,57.67,71.93,71.29,66.25,76.42Z" fill="currentColor"></path><g class="LikeButton_svgLikeDecoration__X2v53"><circle cx="41.5" cy="9.5" fill="#3ea8ff" r="3.5"></circle><circle cx="98.5" cy="26.5" fill="#ffdc6e" r="3.5"></circle><circle cx="13" cy="19" fill="#c067f4" r="5"></circle><circle cx="77" cy="9" fill="#f76685" r="5"></circle><circle cx="26.5" cy="92.5" fill="#f76685" r="3.5"></circle><circle cx="105.5" cy="48.5" fill="#c067f4" r="3.5"></circle><circle cx="4.5" cy="60.5" fill="#3ea8ff" r="3.5"></circle><circle cx="94.5" cy="73.5" fill="#3ea8ff" r="1.5"></circle><circle cx="16.5" cy="75.5" fill="#ffdc6e" r="1.5"></circle><circle cx="78.5" cy="91.5" fill="#ffdc6e" r="1.5"></circle></g></svg></button></div></div></div><div class="View_sidebarChapters__oJuLT"><a class="View_sidebarChapterLinkActive__XxopU View_sidebarChapterLink__hQp61" id="chapter-1863" href="/inamiy/books/3dd014a50f321040a047/viewer/ff60bc16b7b952a91adb"><span class="View_sidebarChapterNum__oSZ_8">01</span>Introduction: Reactive State Machine (2016)</a><a class="View_sidebarChapterLink__hQp61" id="chapter-1864" href="/inamiy/books/3dd014a50f321040a047/viewer/ac378e6f99e18238f73d"><span class="View_sidebarChapterNum__oSZ_8">02</span>Harvest (Effects, Optics, View Structures)</a><a class="View_sidebarChapterLink__hQp61" id="chapter-1865" href="/inamiy/books/3dd014a50f321040a047/viewer/cca752a1fe8700f9d0c0"><span class="View_sidebarChapterNum__oSZ_8">03</span>Composable Architecture</a><a class="View_sidebarChapterLink__hQp61" id="chapter-1866" href="/inamiy/books/3dd014a50f321040a047/viewer/0b7e2d3f87c931c7eddd"><span class="View_sidebarChapterNum__oSZ_8">04</span>Bow Arch (Comonadic UI)</a><a class="View_sidebarChapterLink__hQp61" id="chapter-1867" href="/inamiy/books/3dd014a50f321040a047/viewer/389e62d5d311bc50214f"><span class="View_sidebarChapterNum__oSZ_8">05</span>Recap</a><a class="View_sidebarChapterLink__hQp61" id="chapter-1887" href="/inamiy/books/3dd014a50f321040a047/viewer/b2927a0345db43c8c7f3"><span class="View_sidebarChapterNum__oSZ_8">06</span>Acknowledgements</a></div></div></aside></div><section class="View_section__8hd21" style="font-size:16px"><header class="View_sectionHeader__JGnT7"><div class="ViewerWrapper_container__Cg8HA"><div class="View_chapterContent__FQOka"><span class="View_chapterTitleNumber__23_eN">Chapter <span>01</span></span></div><span style="display:block;width:1px;height:0.7rem;flex-shrink:0"></span><h1 class="View_chapterTitle__tslMs">Introduction: Reactive State Machine (2016)</h1><span style="display:block;width:1px;height:0.8rem;flex-shrink:0"></span><a class="UserLinkSmall_container__PkgaY" href="/inamiy"><div style="width:35px;height:35px"><img alt="Yasuhiro Inami" class="AvatarImage_border__33_UE AvatarImage_plain__BCJNs " height="35" loading="lazy" referrerPolicy="no-referrer" src="https://lh3.googleusercontent.com/a-/AOh14GiymLgECTUn7QdwsLru3Jb_Yr3kFmKapMignFDly8s=s80-c" width="35"/></div><div class="UserLinkSmall_text__2BG_S" style="padding-left:8px;width:calc(100% - 35px);font-size:0.87rem"><div class="UserLinkSmall_name__eqTEi">Yasuhiro Inami</div><div class="UserLinkSmall_additionalText__2MgRM">2020.09.30に更新</div></div></a></div></header><div class="ViewerWrapper_container__Cg8HA"><span style="display:block;width:1px;height:2.7rem;flex-shrink:0"></span><div id="viewer-toc"><div class="InsertCopyButtonToCodeBlock_insertCopyButtonWrapper__tRZUu"><div class="znc BodyContent_anchorToHeadings__Vl0_u"><p><img src="https://storage.googleapis.com/zenn-user-upload/29qvvrq9ajxlycwh0ls7b13jkd6g" alt loading="lazy" class="md-img"></p>
<p>Hi everyone!<br>
My name is Yasuhiro Inami (<a href="https://twitter.com/inamiy" target="_blank" rel="nofollow noopener noreferrer">@inamiy</a>), and it's great to meet you in this book 😄</p>
<p>This book is a compilation of the slides and speaker notes presented at <a href="https://iosdc.jp/2020/" target="_blank" rel="nofollow noopener noreferrer">iOSDC Japan 2020 Conference</a> under the title: <strong>"Functional iOS Architecture for SwiftUI"</strong> on Sep 21, 2020.</p>
<ul>
<li>Original (Japanese): <a href="https://zenn.dev/inamiy/books/795a2d9e6954abb46878" target="_blank">https://zenn.dev/inamiy/books/795a2d9e6954abb46878</a>
</li>
</ul>
<p>By using ubiquitous techniques derived from Functional Programming and Category Theory, one can develop various UI Architectures using SwiftUI, or even for other frontend development.</p>
<p>... But wait!</p>
<p><strong>The whole topic in this book could be very theoretic and difficult for the first timer, even if you are an expert iOS developer.</strong></p>
<p>So, don't rush to learn everything new at once.<br>
Take some time reading other references too, and then come back here again to understand deeper, just like reading a college textbook 📚</p>
<p>I hope you will enjoy the world of <strong>Functional iOS Architecture</strong> 🚀</p>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/3wgd3855t87gr203xccyugxrmu5z" alt loading="lazy" class="md-img"></p>
<p>Let me start with a short history.</p>
<p>The whole topic of today's presentation started when I gave the very first talk at iOSDC Japan 2016 and iOS Conf SG (Singapore), almost 4 years ago.</p>
<p>The talk title is called "Reactive State Machine".</p>
<ul>
<li><a href="https://speakerdeck.com/inamiy/reactive-state-machine-1" target="_blank" rel="nofollow noopener noreferrer">Reactive State Machine - Speaker Deck</a></li>
<li><a href="https://www.youtube.com/watch?v=Oau4JjJP3nA" target="_blank" rel="nofollow noopener noreferrer">Reactive State Machine - iOS Conf SG 2016 - YouTube</a></li>
</ul>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/127px5zv6c8mrth08zl4eu0sa68m" alt loading="lazy" class="md-img"></p>
<p>In this old talk, I talked about the mechanisms of how React, Redux, and Elm Architecture work, and how we can get inspiration from them to develop our own UI architecture in Swift.</p>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/koe3c11hdoozw2onyb9r3dm94snr" alt loading="lazy" class="md-img"></p>
<ul>
<li>Proof of Concept
<ul>
<li>
<a href="https://github.com/inamiy/ReactiveAutomaton" target="_blank" rel="nofollow noopener noreferrer">ReactiveAutomaton</a> (ReactiveSwift)</li>
<li>
<a href="https://github.com/inamiy/RxAutomaton" target="_blank" rel="nofollow noopener noreferrer">RxAutomaton</a> (RxSwift)</li>
</ul>
</li>
<li>Others
<ul>
<li>cf. <a href="https://gist.github.com/inamiy/bd257c60e670de8a144b1f97a07bacec" target="_blank" rel="nofollow noopener noreferrer">React &amp; Elm inspired frameworks in Swift</a>
</li>
<li>
<a href="https://github.com/inamiy/SwiftElm" target="_blank" rel="nofollow noopener noreferrer">SwiftElm</a>：Virtual UIKit-View framework</li>
</ul>
</li>
</ul>
<p>To summarize that, I mentioned about the future of iOS Architecture which is to migrate from MVVM to Elm Architecture for better state management, testability, and side-effect handling.</p>
<p>And instead of having a reducer type <code>Reducer = (Action, State) -&gt; (State, Cmd)</code> in Elm, we can replace <code>Cmd</code> with Functional Reactive Programming (FRP) e.g. RxSwift's <code>Observable</code> to express the side-effects instead, so that we can use both good parts of Elm and FRP.</p>
<p>Unfortunately, this hybrid approach wasn't quite successful at that time, just because we didn't have a nice declarative virtual-view framework like React yet in 2016.</p>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/8n2ckonb5jmn5pjvdzzh1ypcaytu" alt loading="lazy" class="md-img"></p>
<p>But time has passed, and Swift has evolved a lot.<br>
Now we have a new power.</p>
<p>Yes, you know this blue logo.</p>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/z0ykj581iq6nfjwgu6dao98t4s0n" alt loading="lazy" class="md-img"></p>
<p>It's <strong>SwiftUI</strong> !</p>
<p>(You just heard the voice of Craig Federighi)</p>
<p>In 2019, Apple announced SwiftUI for the next-generation view framework so that we could finally use the declarative UI with easy syntax compared to UIKit.<br>
Even better, Apple also announced the companion FRP framework called <strong>Combine</strong> with a nicer type-safe interfaces.<br>
As we all know, this year's WWDC was a phenomenal event for Swift developers.</p>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/3jk4igql2ranelzy0yt5ilwvcv7a" alt loading="lazy" class="md-img"></p>
<p>At that time, I was staying at home watching Keynote like a Zen monk because I didn't have a WWDC ticket.<br>
But then, SwiftUI and Combine suddenly came out, and I was so freaking surprised to yell out:</p>
<p><strong>I WAS WAITING FOR THISSSSSSSSSSS!!!!!</strong></p>
<p>...Yes, the time has come, and I could finally try my Reactive State Machine with a full leverage of SwiftUI and Combine.</p>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/95uz1ouwle4kd68v6mo0a2vjbs1w" alt loading="lazy" class="md-img"></p>
<p>And during WWDC 2019 period, I created a new framework called <strong>Harvest</strong>, which runs on top of SwiftUI and Combine.<br>
I will talk about this shortly.</p>
<hr>
<p><img src="https://storage.googleapis.com/zenn-user-upload/dpcrnt9znqif5ipf6ds4e7bl8t4d" alt loading="lazy" class="md-img"></p>
<ul>
<li><a href="https://github.com/inamiy/Harvest" target="_blank" rel="nofollow noopener noreferrer">inamiy/Harvest</a></li>
<li><a href="https://github.com/pointfreeco/swift-composable-architecture" target="_blank" rel="nofollow noopener noreferrer">pointfreeco/swift-composable-architecture</a></li>
<li><a href="https://github.com/bow-swift/bow-arch" target="_blank" rel="nofollow noopener noreferrer">bow-swift/bow-arch</a></li>
</ul>
<p>So, here is the agenda of today's talk.<br>
Not only about Harvest, but I will also talk about <strong>Composable Architecture</strong> which is getting popular among Swift community nowadays, and also <strong>Bow-Arch</strong> which is also the noteworthy functional framework.<br>
Then, I will talk about the similarities and differences in these 3 frameworks, and also make a comparison with  <strong>React</strong> and <strong>Elm</strong> from web development.</p>
</div></div></div></div><footer class="View_footer__FHawG"><div class="ViewerWrapper_container__Cg8HA"><div class="ViewerPager_container__TEu9T"><div class="ViewerPager_empty__OzKA9"></div><a class="ViewerPager_buttonNext__UTTLi ViewerPager_button__t0gwO" href="/inamiy/books/3dd014a50f321040a047/viewer/ac378e6f99e18238f73d"><div class="ViewerPager_buttonInner__4HQZU"><div class="ViewerPager_buttonLabel__XbHFo">NEXT</div><div class="ViewerPager_buttonTitle__GBful">Harvest (Effects, Optics, View Structures)</div></div><svg viewBox="0 0 24 24" fill="currentColor" class="ViewerPager_icon__3hNUp" height="20" width="20"><path d="M0 0h24v24H0z" fill="none"></path><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></a></div></div></footer></section><aside class="View_desktopMenu__we0vE"><a class="View_menuButtonText__bdwP1 View_menuButton__6pqFT" href="/inamiy/books/3dd014a50f321040a047">← 終了する</a><div class="View_fontToggleContainer__X2wNX"><span class="View_fontToggleContent__mTbxr"></span><button aria-label="フォント設定" class="View_menuButton__6pqFT"><svg x="0px" y="0px" viewBox="0 0 27 27" style="enable-background:new 0 0 27 27" xml:space="preserve" height="28" width="28"><path fill="currentColor" d="M8.4,3.2L3.3,16.8h2.1L7,12.6h5.2l0.9-2.4l-2.6-6.9H8.4z M9.4,6l1.7,4.5H7.8L9.4,6z M16.7,6.3l-5.1,13.6h2.1l1.6-4.2h5 l1.6,4.2h2.1L18.8,6.3H16.7z M17.8,9.1l1.7,4.5h-3.4L17.8,9.1z M11.5,22v2.1H24V22H11.5z"></path></svg></button></div></aside></article><div id="modal-portal"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"chapters":[{"id":1863,"postType":"Chapter","isFree":false,"slug":"ff60bc16b7b952a91adb","bodyLettersCount":5083,"sourceRepoUpdatedAt":null,"bodyUpdatedAt":"2020-09-30T16:09:00.991+09:00","filename":null,"position":1,"path":"/inamiy/books/3dd014a50f321040a047/viewer/ff60bc16b7b952a91adb","title":"Introduction: Reactive State Machine (2016)"},{"id":1864,"postType":"Chapter","isFree":false,"slug":"ac378e6f99e18238f73d","bodyLettersCount":15725,"sourceRepoUpdatedAt":null,"bodyUpdatedAt":"2020-09-30T16:50:54.523+09:00","filename":null,"position":2,"path":"/inamiy/books/3dd014a50f321040a047/viewer/ac378e6f99e18238f73d","title":"Harvest (Effects, Optics, View Structures)"},{"id":1865,"postType":"Chapter","isFree":false,"slug":"cca752a1fe8700f9d0c0","bodyLettersCount":6853,"sourceRepoUpdatedAt":null,"bodyUpdatedAt":"2020-09-30T18:15:36.883+09:00","filename":null,"position":3,"path":"/inamiy/books/3dd014a50f321040a047/viewer/cca752a1fe8700f9d0c0","title":"Composable Architecture"},{"id":1866,"postType":"Chapter","isFree":false,"slug":"0b7e2d3f87c931c7eddd","bodyLettersCount":20093,"sourceRepoUpdatedAt":null,"bodyUpdatedAt":"2020-09-30T17:55:56.590+09:00","filename":null,"position":4,"path":"/inamiy/books/3dd014a50f321040a047/viewer/0b7e2d3f87c931c7eddd","title":"Bow Arch (Comonadic UI)"},{"id":1867,"postType":"Chapter","isFree":false,"slug":"389e62d5d311bc50214f","bodyLettersCount":4043,"sourceRepoUpdatedAt":null,"bodyUpdatedAt":"2020-09-30T17:59:09.786+09:00","filename":null,"position":5,"path":"/inamiy/books/3dd014a50f321040a047/viewer/389e62d5d311bc50214f","title":"Recap"},{"id":1887,"postType":"Chapter","isFree":false,"slug":"b2927a0345db43c8c7f3","bodyLettersCount":1092,"sourceRepoUpdatedAt":null,"bodyUpdatedAt":"2020-09-30T18:04:59.783+09:00","filename":null,"position":6,"path":"/inamiy/books/3dd014a50f321040a047/viewer/b2927a0345db43c8c7f3","title":"Acknowledgements"}],"user":{"id":2510,"username":"inamiy","name":"Yasuhiro Inami","avatarSmallUrl":"https://lh3.googleusercontent.com/a-/AOh14GiymLgECTUn7QdwsLru3Jb_Yr3kFmKapMignFDly8s=s80-c","avatarUrl":"https://lh3.googleusercontent.com/a-/AOh14GiymLgECTUn7QdwsLru3Jb_Yr3kFmKapMignFDly8s=s250-c","bio":"","autolinkedBio":"","githubUsername":"inamiy","twitterUsername":"inamiy","isSupportOpen":true,"tokusyoContact":null,"tokusyoName":null,"websiteUrl":"","websiteDomain":null,"totalLikedCount":310,"gaTrackingId":null,"hatenaId":null},"topics":[{"id":62,"name":"ios","displayName":"iOS","taggingsCount":1846,"imageUrl":"https://storage.googleapis.com/zenn-user-upload/topics/b70c775751.png"},{"id":99,"name":"react","displayName":"React","taggingsCount":5235,"imageUrl":"https://storage.googleapis.com/zenn-user-upload/topics/489b9436a3.png"},{"id":115,"name":"swift","displayName":"Swift","taggingsCount":1630,"imageUrl":"https://storage.googleapis.com/zenn-user-upload/topics/84dd786118.png"},{"id":466,"name":"elm","displayName":"Elm","taggingsCount":84,"imageUrl":"https://storage.googleapis.com/zenn-user-upload/topics/d070e303af.jpeg"},{"id":1069,"name":"architecture","displayName":"architecture","taggingsCount":75,"imageUrl":null}],"crossReferences":[],"canReadAllChapters":true,"purchaseInProgress":false,"isMine":false,"isPreview":false,"currentUserLiked":false,"githubRepository":null,"book":{"id":504,"postType":"Book","title":"Functional iOS Architecture for SwiftUI (English)","slug":"3dd014a50f321040a047","published":true,"price":0,"isSuspendingPrivate":false,"likedCount":15,"publishedAt":"2020-09-30T21:06:41.565+09:00","bodyUpdatedAt":"2020-10-01T03:15:36.883+09:00","sourceRepoUpdatedAt":null,"coverImageSmallUrl":"https://res.cloudinary.com/zenn/image/fetch/s--6Be6MCYZ--/c_fill%2Cf_jpg%2Cfl_progressive%2Ch_350%2Cq_80%2Cw_250/https://storage.googleapis.com/zenn-user-upload/book_cover/d644e322d0.jpg","path":"/inamiy/books/3dd014a50f321040a047","summary":"By Yasuhiro Inami (@inamiy), translated in English.\n日本語ver: https://zenn.dev/inamiy/books/795a2d9e6954abb46878\n\nThis book is a compilation of the slides and speaker notes presented at iOSDC Japan 2020 Conference (Sep 21, 2020) under the title: \"Functional iOS Architecture for SwiftUI\".\n\n- Slide: https://speakerdeck.com/inamiy/iosdc-japan-2020\n\nBy using ubiquitous techniques derived from Functional Programming and Category Theory, one can develop various UI Architectures using SwiftUI, or even for other frontend development.\n\nThis book partly uses pseudo-Swift code for easier readability when Higher Kinded Types appear.\n\nIn this book, one can learn the following two things:\n\n1. Optics: Decomposing Redux / Elm Architecture's States, Actions, Reducers, etc, in a very modular way, and composing to make one large great app of your own.\n2. Comonadic UI: The essence of UI Architectures seen in SwiftUI, React, Elm, and PureScript Halogen.","autolinkedSummary":"By Yasuhiro Inami (@inamiy), translated in English.\n日本語ver: \u003ca href=\"https://zenn.dev/inamiy/books/795a2d9e6954abb46878\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehttps://zenn.dev/inamiy/books/795a2d9e6954abb46878\u003c/a\u003e\n\nThis book is a compilation of the slides and speaker notes presented at iOSDC Japan 2020 Conference (Sep 21, 2020) under the title: \u0026quot;Functional iOS Architecture for SwiftUI\u0026quot;.\n\n- Slide: \u003ca href=\"https://speakerdeck.com/inamiy/iosdc-japan-2020\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ehttps://speakerdeck.com/inamiy/iosdc-japan-2020\u003c/a\u003e\n\nBy using ubiquitous techniques derived from Functional Programming and Category Theory, one can develop various UI Architectures using SwiftUI, or even for other frontend development.\n\nThis book partly uses pseudo-Swift code for easier readability when Higher Kinded Types appear.\n\nIn this book, one can learn the following two things:\n\n1. Optics: Decomposing Redux / Elm Architecture\u0026#39;s States, Actions, Reducers, etc, in a very modular way, and composing to make one large great app of your own.\n2. Comonadic UI: The essence of UI Architectures seen in SwiftUI, React, Elm, and PureScript Halogen.","ogImageUrl":"https://res.cloudinary.com/zenn/image/upload/s--xHR-Iz4N--/g_center%2Ch_280%2Cl_fetch:aHR0cHM6Ly9zdG9yYWdlLmdvb2dsZWFwaXMuY29tL3plbm4tdXNlci11cGxvYWQvYm9va19jb3Zlci9kNjQ0ZTMyMmQwLmpwZw==%2Cw_200/v1627283836/default/og-base-book_yz4z02.jpg","tocEnabled":true,"coverImageUrl":"https://res.cloudinary.com/zenn/image/fetch/s--rdDyz9FW--/c_fill%2Cf_jpg%2Cfl_progressive%2Ch_700%2Cq_90%2Cw_500/https://storage.googleapis.com/zenn-user-upload/book_cover/d644e322d0.jpg","shouldNoindex":false,"totalLettersCount":52889,"badges":[],"tocDepth":2,"requireAdditionalSettings":false,"contact":null},"initialActiveChapter":{"id":1863,"postType":"Chapter","isFree":false,"slug":"ff60bc16b7b952a91adb","bodyLettersCount":5083,"sourceRepoUpdatedAt":null,"bodyUpdatedAt":"2020-09-30T16:09:00.991+09:00","filename":null,"position":1,"path":"/inamiy/books/3dd014a50f321040a047/viewer/ff60bc16b7b952a91adb","title":"Introduction: Reactive State Machine (2016)","bodyHtml":"\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/29qvvrq9ajxlycwh0ls7b13jkd6g\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cp\u003eHi everyone!\u003cbr\u003e\nMy name is Yasuhiro Inami (\u003ca href=\"https://twitter.com/inamiy\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003e@inamiy\u003c/a\u003e), and it's great to meet you in this book 😄\u003c/p\u003e\n\u003cp\u003eThis book is a compilation of the slides and speaker notes presented at \u003ca href=\"https://iosdc.jp/2020/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eiOSDC Japan 2020 Conference\u003c/a\u003e under the title: \u003cstrong\u003e\"Functional iOS Architecture for SwiftUI\"\u003c/strong\u003e on Sep 21, 2020.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOriginal (Japanese): \u003ca href=\"https://zenn.dev/inamiy/books/795a2d9e6954abb46878\" target=\"_blank\"\u003ehttps://zenn.dev/inamiy/books/795a2d9e6954abb46878\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eBy using ubiquitous techniques derived from Functional Programming and Category Theory, one can develop various UI Architectures using SwiftUI, or even for other frontend development.\u003c/p\u003e\n\u003cp\u003e... But wait!\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eThe whole topic in this book could be very theoretic and difficult for the first timer, even if you are an expert iOS developer.\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eSo, don't rush to learn everything new at once.\u003cbr\u003e\nTake some time reading other references too, and then come back here again to understand deeper, just like reading a college textbook 📚\u003c/p\u003e\n\u003cp\u003eI hope you will enjoy the world of \u003cstrong\u003eFunctional iOS Architecture\u003c/strong\u003e 🚀\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/3wgd3855t87gr203xccyugxrmu5z\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cp\u003eLet me start with a short history.\u003c/p\u003e\n\u003cp\u003eThe whole topic of today's presentation started when I gave the very first talk at iOSDC Japan 2016 and iOS Conf SG (Singapore), almost 4 years ago.\u003c/p\u003e\n\u003cp\u003eThe talk title is called \"Reactive State Machine\".\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://speakerdeck.com/inamiy/reactive-state-machine-1\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eReactive State Machine - Speaker Deck\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://www.youtube.com/watch?v=Oau4JjJP3nA\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eReactive State Machine - iOS Conf SG 2016 - YouTube\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/127px5zv6c8mrth08zl4eu0sa68m\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cp\u003eIn this old talk, I talked about the mechanisms of how React, Redux, and Elm Architecture work, and how we can get inspiration from them to develop our own UI architecture in Swift.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/koe3c11hdoozw2onyb9r3dm94snr\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eProof of Concept\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/inamiy/ReactiveAutomaton\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eReactiveAutomaton\u003c/a\u003e (ReactiveSwift)\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/inamiy/RxAutomaton\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eRxAutomaton\u003c/a\u003e (RxSwift)\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003eOthers\n\u003cul\u003e\n\u003cli\u003ecf. \u003ca href=\"https://gist.github.com/inamiy/bd257c60e670de8a144b1f97a07bacec\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eReact \u0026amp; Elm inspired frameworks in Swift\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"https://github.com/inamiy/SwiftElm\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003eSwiftElm\u003c/a\u003e：Virtual UIKit-View framework\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo summarize that, I mentioned about the future of iOS Architecture which is to migrate from MVVM to Elm Architecture for better state management, testability, and side-effect handling.\u003c/p\u003e\n\u003cp\u003eAnd instead of having a reducer type \u003ccode\u003eReducer = (Action, State) -\u0026gt; (State, Cmd)\u003c/code\u003e in Elm, we can replace \u003ccode\u003eCmd\u003c/code\u003e with Functional Reactive Programming (FRP) e.g. RxSwift's \u003ccode\u003eObservable\u003c/code\u003e to express the side-effects instead, so that we can use both good parts of Elm and FRP.\u003c/p\u003e\n\u003cp\u003eUnfortunately, this hybrid approach wasn't quite successful at that time, just because we didn't have a nice declarative virtual-view framework like React yet in 2016.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/8n2ckonb5jmn5pjvdzzh1ypcaytu\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cp\u003eBut time has passed, and Swift has evolved a lot.\u003cbr\u003e\nNow we have a new power.\u003c/p\u003e\n\u003cp\u003eYes, you know this blue logo.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/z0ykj581iq6nfjwgu6dao98t4s0n\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cp\u003eIt's \u003cstrong\u003eSwiftUI\u003c/strong\u003e !\u003c/p\u003e\n\u003cp\u003e(You just heard the voice of Craig Federighi)\u003c/p\u003e\n\u003cp\u003eIn 2019, Apple announced SwiftUI for the next-generation view framework so that we could finally use the declarative UI with easy syntax compared to UIKit.\u003cbr\u003e\nEven better, Apple also announced the companion FRP framework called \u003cstrong\u003eCombine\u003c/strong\u003e with a nicer type-safe interfaces.\u003cbr\u003e\nAs we all know, this year's WWDC was a phenomenal event for Swift developers.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/3jk4igql2ranelzy0yt5ilwvcv7a\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cp\u003eAt that time, I was staying at home watching Keynote like a Zen monk because I didn't have a WWDC ticket.\u003cbr\u003e\nBut then, SwiftUI and Combine suddenly came out, and I was so freaking surprised to yell out:\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eI WAS WAITING FOR THISSSSSSSSSSS!!!!!\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e...Yes, the time has come, and I could finally try my Reactive State Machine with a full leverage of SwiftUI and Combine.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/95uz1ouwle4kd68v6mo0a2vjbs1w\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cp\u003eAnd during WWDC 2019 period, I created a new framework called \u003cstrong\u003eHarvest\u003c/strong\u003e, which runs on top of SwiftUI and Combine.\u003cbr\u003e\nI will talk about this shortly.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg src=\"https://storage.googleapis.com/zenn-user-upload/dpcrnt9znqif5ipf6ds4e7bl8t4d\" alt loading=\"lazy\" class=\"md-img\"\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/inamiy/Harvest\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003einamiy/Harvest\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/pointfreeco/swift-composable-architecture\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003epointfreeco/swift-composable-architecture\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/bow-swift/bow-arch\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003ebow-swift/bow-arch\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eSo, here is the agenda of today's talk.\u003cbr\u003e\nNot only about Harvest, but I will also talk about \u003cstrong\u003eComposable Architecture\u003c/strong\u003e which is getting popular among Swift community nowadays, and also \u003cstrong\u003eBow-Arch\u003c/strong\u003e which is also the noteworthy functional framework.\u003cbr\u003e\nThen, I will talk about the similarities and differences in these 3 frameworks, and also make a comparison with  \u003cstrong\u003eReact\u003c/strong\u003e and \u003cstrong\u003eElm\u003c/strong\u003e from web development.\u003c/p\u003e\n","toc":[]}},"__N_SSP":true},"page":"/[username]/books/[slug]/viewer/[[...chapter_slug]]","query":{"username":"inamiy","slug":"3dd014a50f321040a047","chapter_slug":["ff60bc16b7b952a91adb"]},"buildId":"piX8DDrzno6pbqKClrLHx","assetPrefix":"https://zenn.dev","isFallback":false,"gssp":true,"scriptLoader":[]}</script></body></html>
